#include<stdio.h>
#include<math.h>
#include<string.h>
int checkFloat(int check){
	float c= check;
	if(check-c!=0)
		return 0;
	else return 1;	
}
void Interchange(int row, int col, float A[row][col], int n, int j1)
{
	int i, k,x,y; 
	float change;
	for(i = 0; i < col; i++)
	{
		change = A[j1][i];
		A[j1][i] = A[n][i];
		A[n][i] = change;
	}
}
void Echelon(int row, int col, float A[row][col])
{
	int i, j, j1, j2 = 0, k, n, check = 0, compzero = 0, multi = 10, deci[6], trun = 0, num;
	float div, temp;
	for(j1 = 0; j1 < row; j1++)
	{
		while(A[j1][j2] == 0)
		{
			for(n = j1 + 1; n < row; n++)
			{
				if(A[n][j2] != 0)
				{
					Interchange(row, col, A, n, j1);
					check = 1;
				}
				if(check == 1) break;
			}
			if(check == 0) j2++;
			if(j2 == col)
			{
				compzero = 1;
				break;
			}
		}
		if(compzero == 1) break;
		div = A[j1][j2];
		for(k = 0; k < col; k++)
		{
			if(A[j1][k] != 0) A[j1][k] /= div;
            else continue;
			for(i = 0; i < 6; i++)
			{
				num = A[j1][k] * multi;
				deci[i] = num % 10;
				multi *= 10;
			}
			for(i = 0; i < 6; i++)
			{
				if(deci[i] != 0) break;
				else trun++;
			}
			if(trun >= 5)
			{
				A[j1][k] = truncf(A[j1][k]);
			}
			multi = 10;
			trun = 0;
		}
		for(i = j1; i < row - 1; i++)
		{
			temp = -A[i+1][j2];
			for(k = 0; k < col; k++)
			{
				A[i + 1][k] += A[j1][k]*temp;
				//if(A[i + 1][k] < (0.00001) && A[i + 1][k] > (-0.00001)) A[i + 1][k] = 0;
				for(j = 0; j < 6; j++)
				{
					num = A[i + 1][k] * multi;
					deci[j] = num % 10;
					multi *=10;
				}
				for(j = 0; j < 6; j++)
				{
					if(deci[j] != 0) break;
					else trun++;
				}
				if(trun >= 5) A[i + 1][k] = truncf(A[i + 1][k]);
				multi = 10;
				trun = 0;
			}
		}
		check = 0;
		j2++;
	}
}
void main(){
    float input[3][5]={{1,0,-1,0},{6,0,0,-2},{0,2,2,0}};
    Echelon(3,5,input);
    int i,j;
    /*for(i=0;i<3;i++){
        for(j=0;j<5;j++){
        printf("%f ",input[i][j]);
		}printf("\n");    
    }*/
		
		for(i=0;i<3;i++){
        	for(j=0;j<5;j++){
		
    	    }    
    	}
}
